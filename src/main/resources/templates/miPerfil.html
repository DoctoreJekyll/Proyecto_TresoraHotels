<!DOCTYPE html>
<html lang="es"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{/layout/plantillasinlogin}">
<head>
    <title>Mi Perfil - Tresora Hotels</title>
</head>

<body>
<main id="contenido-principal" class="container py-5" layout:fragment="contenido">

    <section class="mb-5">
        <h1 class="display-4 fw-bold text-center">Mi Perfil</h1>
        <p class="lead text-center">Edita tus datos o elimina tu cuenta</p>
    </section>

    <div th:if="${successMessage}" class="alert alert-success" role="alert">
        <p th:text="${successMessage}"></p>
    </div>

    <form th:action="@{/usuarios/actualizar}" method="post" th:object="${usuario}" class="row g-3">
        <input type="hidden" th:field="*{id}" />

        <div class="col-md-6">
            <label for="nombre" class="form-label">Nombre</label>
            <input type="text" id="nombre" th:field="*{nombre}" class="form-control" required />
        </div>

        <div class="col-md-6">
            <label for="apellidos" class="form-label">Apellidos</label>
            <input type="text" id="apellidos" th:field="*{apellidos}" class="form-control" required />
        </div>

        <div class="col-md-6">
            <label for="email" class="form-label">Email</label>
            <input type="email" id="email" th:field="*{email}" class="form-control" required />
        </div>

        <div class="col-md-6">
            <label for="telefono" class="form-label">Teléfono</label>
            <input type="text" id="telefono" th:field="*{telefono}" class="form-control" />
        </div>

        <div class="col-md-6">
            <label for="direccion" class="form-label">Dirección</label>
            <input type="text" id="direccion" th:field="*{direccion}" class="form-control" />
        </div>

        <div class="col-md-6">
            <label for="password" class="form-label">Contraseña</label>
            <input type="password" id="password" th:value="*{password}" class="form-control" disabled />
            <small class="form-text text-muted mt-1">
                <a th:href="@{/usuarios/cambiar-contrasena}" class="btn btn-link p-0">Cambiar contraseña</a>
            </small>
        </div>

        <div class="col-md-6">
            <label for="dni" class="form-label">DNI/Pasaporte</label>
            <input type="text" id="dni" th:field="*{dni}" class="form-control" />
        </div>

        <div class="col-md-6">
            <label for="fechaNacimiento" class="form-label">Fecha de Nacimiento</label>
            <input type="date" id="fechaNacimiento" th:field="*{fechaNacimiento}" class="form-control" />
        </div>

        <div class="col-12 text-end mt-3">
            <button type="submit" class="btn btn-grupo5">Guardar Cambios</button>
        </div>
    </form>

    <hr class="my-4">

    <div class="text-center">
        <form th:action="@{/usuarios/eliminar}" method="post" th:object="${usuario}" onsubmit="return confirm('¿Estás seguro de que deseas eliminar tu cuenta? Esta acción no se puede deshacer.');">
            <input type="hidden" th:field="*{id}" />
            <button type="submit" class="btn btn-outline-danger">Eliminar Cuenta</button>
        </form>
    </div>

</main>
</body>
</html>

