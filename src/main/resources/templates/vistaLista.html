<!doctype html>
<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="~{/layout/plantilla}"
	  lang="es">
<body>
<div layout:fragment="contenido">

	<main>
		<div class="d-flex justify-content-between align-items-center mb-3">
			<h1 th:text="${titulo}">Vista de Lista</h1>
			<a th:href="@{'/' + ${rutaEntidad} + '/nuevo'}" class="btn btn-success" title="Añadir nuevo">
				+ Añadir
			</a>
		</div>

		<table class="table table-bordered align-middle text-center">
			<thead class="table-dark">
			<tr>
				<th th:each="c : ${cabeceras}" th:text="${c}">Columna</th>
				<th>Acciones</th>
			</tr>
			</thead>
			<tbody>
			<tr th:each="fila : ${filas}">
				<td th:each="c : ${cabeceras}">
					<!-- Si la columna es de imagen -->
					<div th:if="${#strings.toLowerCase(c).matches('.*(imagen|foto|img).*')}">
						<img th:if="${fila.get(c)} != null"
							 th:src="@{${fila.get(c)}}"
							 alt="Imagen"
							 style="max-height: 100px;" class="img-thumbnail"
							 onerror="this.style.display='none'" />
						<span th:if="${fila.get(c)} == null">Sin imagen</span>
					</div>

					<!-- Si la columna NO es de imagen -->
					<div th:if="${!#strings.toLowerCase(c).matches('.*(imagen|foto|img).*')}">
						<span th:text="${fila.get(c)}">Dato</span>
					</div>
				</td>
				<td>
					<a th:href="@{'/' + ${rutaEntidad} + '/editar/' + ${fila.get('id')}}"
					   class="btn btn-sm btn-primary me-1">Editar</a>

					<form th:action="@{'/' + ${rutaEntidad} + '/eliminar/' + ${fila.get('id')}}"
						  method="post" style="display:inline">
						<button type="submit"
								class="btn btn-sm btn-danger"
								onclick="return confirm('¿Estás seguro de que deseas eliminar este registro?')">
							Eliminar
						</button>
					</form>
				</td>
			</tr>
			</tbody>
		</table>
	</main>

</div>
</body>
</html>
