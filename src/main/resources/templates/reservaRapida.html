<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{/layout/plantilla}">

<head>
    <title>Reserva Rápida</title>
</head>

<body class="bg-gradient-primary">

<main layout:fragment="contenido" id="main-content" class="main-container" role="main" aria-labelledby="booking-title">
    <div class="center-wrapper" style="min-height: 100vh; display: flex; align-items: center; justify-content: center; width: 100%;">
        <div class="card form-card" style="max-width: 512px; width: 100%; padding: 2rem; border-radius: 1rem; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);">
            <h1 id="booking-title" class="card-title text-center">Reserva Rápida</h1>

            <form th:action="@{/reservas/rapida}" th:object="${reservaDTO}" method="post" id="booking-form">

                <p class="card-text mb-4">Complete los campos para reservar su estancia. Todos los campos son obligatorios.</p>

                <!-- Nombre -->
                <div class="form-group mb-4">
                    <label for="nombre">Nombre</label>
                    <input type="text" th:field="*{nombre}" id="nombre" class="form-control" required />
                </div>

                <!-- Email -->
                <div class="form-group mb-4">
                    <label for="email">Email</label>
                    <input type="email" th:field="*{email}" id="email" class="form-control" required />
                </div>

                <!-- Habitación -->
                <div class="form-group mb-4">
                    <label for="idHabitacion">Habitación</label>
                    <select th:field="*{idHabitacion}" id="idHabitacion" class="form-control" required>
                        <option th:each="habitacion : ${habitaciones}"
                                th:value="${habitacion.id}"
                                th:text="${habitacion.getTipo()}">Habitación</option>
                    </select>
                </div>

                <!-- Fecha entrada -->
                <div class="form-group mb-4">
                    <label for="fechaEntrada">Fecha de Entrada</label>
                    <input type="date" th:field="*{fechaEntrada}" id="fechaEntrada" class="form-control" required />
                </div>

                <!-- Fecha salida -->
                <div class="form-group mb-4">
                    <label for="fechaSalida">Fecha de Salida</label>
                    <input type="date" th:field="*{fechaSalida}" id="fechaSalida" class="form-control" required />
                </div>

                <!-- Pax -->
                <div class="form-group mb-4">
                    <label for="pax">Número de huéspedes</label>
                    <input type="number" min="1" max="10" th:field="*{pax}" id="pax" class="form-control" required />
                </div>

                <!-- Comentarios -->
                <div class="form-group mb-4">
                    <label for="comentarios">Comentarios</label>
                    <textarea th:field="*{comentarios}" id="comentarios" class="form-control" rows="3" placeholder="Comentarios adicionales..."></textarea>
                </div>

                <!-- Productos opcionales -->
                <div class="form-group mb-4">
                    <p class="services-label mb-2">Servicios adicionales:</p>
                    <div th:each="producto, iterStat : ${productos}" class="checkbox-group mb-3">

                        <!-- Checkbox de selección del producto -->
                        <input type="checkbox"
                               th:field="{productos[${iterStat.index}].idProducto}"
                               th:value="${producto.id}"
                               class="form-check-input me-2"
                               th:id="'producto_' + ${iterStat.index}" />

                        <!-- Cantidad -->
                        <input type="number"
                               th:field="{productos[${iterStat.index}].cantidad}"
                               placeholder="Cantidad"
                               class="form-control mt-1"
                               style="max-width: 100px;" min="1" />

                        <!-- Fecha -->
                        <input type="date"
                               th:field="{productos[${iterStat.index}].fecha}"
                               class="form-control mt-1"
                               style="max-width: 200px;" />

                        <!-- Descuento -->
                        <input type="number"
                               th:field="{productos[${iterStat.index}].descuento}"
                               placeholder="% desc"
                               class="form-control mt-1"
                               style="max-width: 100px;" min="0" max="100" />
                    </div>
                </div>

                <!-- Botón enviar -->
                <button type="submit" class="btn btn-grupo5 w-100 mt-3">Reservar Ahora</button>
            </form>

            <p class="card-text text-center mt-4">¡Disponibilidad limitada! Reserva en segundos.</p>
        </div>
    </div>
</main>

</body>
</html>
